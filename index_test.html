<!DOCTYPE html>

<html>
  <head>
    <title>Example</title>
  </head>
  <body>
    <!-- Load the Facebook JavaScript SDK -->
    <div id="fb-root"></div>
    <script src="//connect.facebook.net/en_US/all.js"></script>
    <script src="js/swfobject.js"></script>
    
    <script type="text/javascript">
      
	var appId = "601400096658911";
	var url = "http://bizimdepo.mobi/monopoly/index_test.html";
	// Initialize the Facebook JavaScript SDK
	FB.init({appId:appId, xfbml: true, status: true, cookie: true});

	// Check if the current user is logged in and has authorized the app
	FB.getLoginStatus(checkLoginStatus);


	// Login in the current user via Facebook and ask for email permission
	function authUser() 
	{
		FB.login(checkLoginStatus, {scope:'email'});
	}

	// Check the result of the user status and display login button if necessary
	function checkLoginStatus(response) 
	{
		if(response && response.status == 'connected') {
			console.log('User is authorized');


			// Now Personalize the User Experience
			console.log('Access Token: ' + response.authResponse.accessToken);
			
			initIframe(response.authResponse);
		}
		else 
		{
			console.log('User is not authorized');
			window.location="https://www.facebook.com/dialog/oauth?client_id="+appId+"&redirect_uri="+url+"&response_type=token";
		}
	}
	
	  function initIframe(m_vars) 
	  {
				
		console.log("initIframe", m_vars);
		var rand = String(Math.floor(Math.random() * 100000));
		var m_flashvars = {};
		var str = "";
		
		for (var i in m_vars) 
		{
			var key = i;
			var value = m_vars[i];
			m_flashvars[key] = value;
			str += key + "=" + value + "&";
		}
		
		m_flashvars["token"] = m_vars.accessToken;
		m_flashvars["fb_user_id"] = m_vars.userID;

		m_flashvars["facebookLogin"] = "1";

		var params = 
		{
			menu: "false",
			allowFullscreen: "true",
			allowFullscreenInteractive: "true",
			allowScriptAccess: "always",
			bgcolor: "",
			wmode: "direct"
		};
		
		var swfId = "MonopolyPrototype";
		var attributes = {id: swfId};

		swfobject.embedSWF(
			"MonopolyPrototype.swf" + "?rand=" + rand,
			"altContent", "100%", "100%", "14.0.0",
			"expressInstall.swf",
			m_flashvars, params, attributes);
		m_swf = document.getElementById(swfId);	
	}
				
    </script>
    <style>
		html, body {
			height:100%;
			overflow:hidden;
		}
		body {
			margin:0;
		}
	</style>
	
	<div class="fb-login-button" data-max-rows="1" data-size="medium" data-show-faces="true" data-auto-logout-link="true"></div>
      <div id="altContent">
		  
	  </div>
  </body>
</html>